# tmux.conf
# Yekta Leblebici <yekta@iamyekta.com>

# Set prefix to <CTRL + a>
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Set default terminal, w/ 256-color support
set -g default-terminal screen-256color

# Set default shell
set-option -g default-shell /usr/local/bin/zsh


# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Allows for faster key repetition
set -s escape-time 0

# Vi copy-paste mode
set-window-option -g mode-keys vi
bind-key -Tcopy-mode-vi 'v' send -X begin-selection
bind-key -Tcopy-mode-vi 'y' send -X copy-selection\; run -b "tmux save-buffer - | reattach-to-user-namespace pbcopy" # OSX
# bind-key -Tcopy-mode-vi 'y' send -X copy-selection\; run -b "tmux save-buffer - | xclip -selection clipboard -i" # LINUX
# bind C-p run "tmux set-buffer \"$(xclip -o)\"; tmux paste-buffer" # LINUX


# Activity monitoring
setw -g monitor-activity on
set -g visual-activity on

# Automatic rename
set-window-option -g automatic-rename
set-option -g allow-rename on

# Longer history
set-option -g history-limit 100000

# Enable mouse
set -g mouse on

### KEY BINDINGS
# Enable <Shift + PageUp/PageDown> keys.
set -g terminal-overrides 'xterm*:smcup@:rmcup@'

# Bind <PREFIX + h> and <PREFIX + j> to move panes.
bind-key h swap-pane -U
bind-key j swap-pane -D

# Bind <PREFIX + r> to reload tmux.conf.
bind r source ~/.tmux.conf\; display "~/.tmux.conf sourced!"

# Bind <PREFIX + v/b> to splits.
bind-key v split-window -h
bind-key b split-window

# Bind <PREFIX + Left/Right> to change between windows.
bind-key Left previous-window
bind-key Right next-window

# Bind <PREFIX + Enter> to copy/paste mode.
bind Enter copy-mode

# Bind <PREFIX + p> and <PREFIX + P> or pasting.
bind-key p paste-buffer
bind-key P choose-buffer

# Bind <PREFIX + PREFIX> to go to latest window.
bind-key C-a last-window

# BIND <PREFIX + M> to toggle mouse mode.
# Source: https://github.com/cakturk/dotfiles
bind-key M set-option -g mouse\; display "Mouse #{?mouse,ON,OFF}"

# Capture pane and open in Vim
# Source: https://github.com/cakturk/dotfiles
bind-key C-c run 'tmux capture-pane -S -102400 -p > /tmp/tmux-capture.txt'\;\
             new-window "vi /tmp/tmux-capture.txt"

# Switch panes using Alt-arrow without prefix, and <PREFIX + h|j|k|l>
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

bind -r h select-pane -L  # move left
bind -r j select-pane -D  # move down
bind -r k select-pane -U  # move up
bind -r l select-pane -R  # move right

### Styling
# Panes
set -g pane-border-fg black
set -g pane-active-border-fg white

# Modes
setw -g clock-mode-colour white
setw -g mode-attr bold
setw -g mode-fg colour12
setw -g mode-bg colour238

# Status bar
set -g status-position bottom
set -g status-bg colour234
set -g status-fg colour137
set -g status-attr dim
set -g status-left ''
set -g status-right '#[fg=colour233,bg=colour241,bold] %d/%m #[fg=colour233,bg=colour245,bold] %H:%M:%S '
set -g status-right-length 50
set -g status-left-length 20
set -g status-justify left
set -g status-interval 2

# Windows
setw -g window-status-current-fg colour12
setw -g window-status-current-bg colour238
setw -g window-status-current-attr bold
setw -g window-status-current-format ' #I#[fg=colour250]:#[fg=colour255]#W#[fg=colour12]#F '

setw -g window-status-fg colour138
setw -g window-status-bg colour235
setw -g window-status-attr none
setw -g window-status-format ' #I#[fg=colour237]:#[fg=colour250]#W#[fg=colour244]#F '

setw -g window-status-bell-fg colour119
setw -g window-status-bell-bg colour235

# Messages
set -g message-command-fg blue
set -g message-command-bg black
set -g message-attr bold
set -g message-fg colour137
set -g message-bg colour235
